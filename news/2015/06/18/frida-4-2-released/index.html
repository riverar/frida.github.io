<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title>Frida 4.2 Released</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="Frida - Feed" href="/feed.xml" />
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Frida’s master branch" href="https://github.com/frida/frida/frida/commits/master.atom" />
  <link rel="stylesheet" href="/css/screen.css" />
  <link rel="icon" type="image/png" href="/favicon.ico" />
  <script src="/js/modernizr-2.5.3.min.js"></script>
</head>


<body class="wrap">
  <header>
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li class="">
    <a href="/">Overview</a>
  </li>
  <li class="">
    <a href="/docs/home/">Docs</span></a>
  </li>
  <li class="current">
    <a href="/news/">News</a>
  </li>
  <li class="">
    <a href="https://github.com/frida/frida"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

  </nav>
  <div class="grid">
    <div class="logotype unit one-third center-on-mobiles">
      <a href="/">
        <span>FЯIDA</span>
        <img src="/img/logotype.svg" width="205" height="39" alt="">
      </a>
    </div>
    <nav class="main-nav unit two-thirds hide-on-mobiles">
      <ul>
  <li class="">
    <a href="/">Overview</a>
  </li>
  <li class="">
    <a href="/docs/home/">Docs</span></a>
  </li>
  <li class="current">
    <a href="/news/">News</a>
  </li>
  <li class="">
    <a href="https://github.com/frida/frida"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

    </nav>
  </div>
</header>


    <section class="news">
    <div class="grid">

      <div class="docs-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the blog…</option>
    <option value="/news/">Home</option>
    <optgroup label="v1.x">
      
      <option value="/news/2015/06/18/frida-4-2-released/">Frida 4.2 Released</option>
      
      <option value="/news/2015/06/09/frida-4-1-released/">Frida 4.1 Released</option>
      
      <option value="/news/2015/05/09/frida-4-0-0-released/">Frida 4.0.0 Released</option>
      
      <option value="/news/2015/03/20/frida-3-0-0-released/">Frida 3.0.0 Released</option>
      
      <option value="/news/2015/03/01/frida-2-0-2-released/">Frida 2.0.2 Released</option>
      
      <option value="/news/2015/03/01/frida-2-0-1-released/">Frida 2.0.1 Released</option>
      
      <option value="/news/2015/03/01/frida-2-0-0-released/">Frida 2.0.0 Released</option>
      
      <option value="/news/2015/02/23/frida-1-8-0-released/">Frida 1.8.0 Released</option>
      
      <option value="/news/2014/11/18/frida-1-6-8-released/">Frida 1.6.8 Released</option>
      
      <option value="/news/2014/11/03/frida-1-6-7-released/">Frida 1.6.7 Released</option>
      
      <option value="/news/2014/11/03/frida-1-6-6-released/">Frida 1.6.6 Released</option>
      
      <option value="/news/2014/10/29/frida-1-6-5-released/">Frida 1.6.5 Released</option>
      
      <option value="/news/2014/10/19/frida-1-6-4-released/">Frida 1.6.4 Released</option>
      
      <option value="/news/2014/08/25/frida-1-6-3-released/">Frida 1.6.3 Released</option>
      
      <option value="/news/2014/08/03/frida-1-6-2-released/">Frida 1.6.2 Released</option>
      
      <option value="/news/2014/07/26/frida-1-6-1-released/">Frida 1.6.1 Released</option>
      
      <option value="/news/2014/05/30/frida-1-6-0-released/">Frida 1.6.0 Released</option>
      
      <option value="/news/2014/05/14/frida-1-4-2-released/">Frida 1.4.2 Released</option>
      
      <option value="/news/2014/05/14/frida-1-4-1-released/">Frida 1.4.1 Released</option>
      
      <option value="/news/2014/05/04/frida-1-4-0-released/">Frida 1.4.0 Released</option>
      
      <option value="/news/2014/04/21/frida-1-2-1-released/">Frida 1.2.1 Released</option>
      
      <option value="/news/2014/04/17/frida-1-2-0-released/">Frida 1.2.0 Released</option>
      
      <option value="/news/2014/03/09/frida-1-0-11-released/">Frida 1.0.11 Released</option>
      
      <option value="/news/2014/02/16/frida-1-0-10-released/">Frida 1.0.10 Released</option>
      
      <option value="/news/2014/01/25/frida-1-0-9-released/">Frida 1.0.9 Released</option>
      
      <option value="/news/2014/01/15/frida-1-0-8-released/">Frida 1.0.8 Released</option>
      
      <option value="/news/2014/01/12/frida-1-0-7-released/">Frida 1.0.7 Released</option>
      
      <option value="/news/2014/01/11/frida-1-0-6-released/">Frida 1.0.6 Released</option>
      
      <option value="/news/2014/01/05/frida-1-0-5-released/">Frida 1.0.5 Released</option>
      
    </optgroup>
  </select>
</div>

      <div class="news-nav-desktop unit one-quarter hide-on-mobiles">
  <aside>
    <ul>
      <li class="">
        <a href="/news/">All News</a>
      </li>
      <li class="">
        <a href="/news/releases/">Frida Releases</a>
      </li>
    </ul>
    <h4>Recent Releases</h4>
    <ul>
      
      <li class="current">
        <a href="/news/2015/06/18/frida-4-2-released/">Version 4.2</a>
      </li>
      
      <li class="">
        <a href="/news/2015/06/09/frida-4-1-released/">Version 4.1</a>
      </li>
      
      <li class="">
        <a href="/news/2015/05/09/frida-4-0-0-released/">Version 4.0.0</a>
      </li>
      
      <li class="">
        <a href="/news/2015/03/20/frida-3-0-0-released/">Version 3.0.0</a>
      </li>
      
      <li class="">
        <a href="/news/2015/03/01/frida-2-0-2-released/">Version 2.0.2</a>
      </li>
      
      <li>
        <a href="/docs/history/">History »</a>
      </li>
    </ul>
  </aside>
</div>


      <div class="news-articles unit three-quarters">
        <article>
  <h2>
    Frida 4.2 Released
    <a href="/news/2015/06/18/frida-4-2-released/" class="permalink" title="Permalink">∞</a>
  </h2>
  <span class="post-category">
    
    <span class="label">release</span>
    
  </span>
  <div class="post-meta">
    <span class="post-date">
      18 Jun 2015
    </span>
    <a href="https://github.com/oleavr" class="post-author">
      <img src="https://github.com/oleavr.png" class="avatar" />
      oleavr
    </a>
  </div>
  <p class="post-content">
    <p>The Frida co-conspirators have been cracking away on several fronts, so much
lately that I figured it was worth jotting this down to get the word out.</p>

<p>In Dalvik land, <a href="https://github.com/marc1006">@marc1006</a> contributed a really
neat new feature – the ability to do object carving, essentially scanning the
heap for objects of a certain type. Check this out:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">strings</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nx">Dalvik</span><span class="p">.</span><span class="nx">choose</span><span class="p">(</span><span class="s1">'java.lang.String'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">onMatch</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">strings</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="na">onComplete</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Found '</span> <span class="o">+</span> <span class="nx">strings</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="s1">' strings!'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span></code></pre></figure>

<p>Meanwhile, <a href="https://github.com/Tyilo">@Tyilo</a> has been rocking out adding the
same feature for Objective-C:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">strings</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nx">ObjC</span><span class="p">.</span><span class="nx">choose</span><span class="p">(</span><span class="nx">ObjC</span><span class="p">.</span><span class="nx">classes</span><span class="p">.</span><span class="nx">NSString</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">onMatch</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">strings</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="na">onComplete</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Found '</span> <span class="o">+</span> <span class="nx">strings</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="s1">' strings!'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span></code></pre></figure>

<p>In other mobile news, <a href="https://github.com/trufae">@pancake</a> added support for
enumerating applications on Firefox OS. Sweet!</p>

<p>While all of this was going on, <a href="https://github.com/s1341">@s1341</a> has been
hard at work stabilizing the QNX port, and it’s reportedly working really well
now.</p>

<p>On my end I have been applying Frida to interesting challenges at
<a href="https://www.nowsecure.com/">NowSecure</a>, and ran into quite a few bugs and
limitations in the Objective-C integration. There’s now support for overriding
methods that deal with struct types passed by value, e.g. <code class="highlighter-rouge">-[UIView drawRect:]</code>,
which means <code class="highlighter-rouge">NativeFunction</code> and <code class="highlighter-rouge">NativeCallback</code> also support these; so for
declaring a struct simply start an array with the fields’ types specified
sequentially. You can even nest them. So for the <code class="highlighter-rouge">- drawRect:</code> case where a
struct is passed by value, and that struct is made out of two other structs,
you’d declare it like this:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NativeFunction</span><span class="p">(</span><span class="nx">ptr</span><span class="p">(</span><span class="s1">'0x1234'</span><span class="p">),</span> <span class="s1">'void'</span><span class="p">,</span>
    <span class="p">[[[</span><span class="s1">'double'</span><span class="p">,</span> <span class="s1">'double'</span><span class="p">],</span> <span class="p">[</span><span class="s1">'double'</span><span class="p">,</span> <span class="s1">'double'</span><span class="p">]]]);</span></code></pre></figure>

<p>Another thing worth mentioning is that a long-standing issue especially visible
when instrumenting 32-bit iOS apps, but affecting all platforms, has finally
<a href="https://github.com/frida/frida-gum/commit/2f02e911edc4a5df80051fdaed72e0281ea751e7">been fixed</a>.</p>

<p>So let’s run quickly through all the changes:</p>

<p>4.1.8:</p>

<ul>
  <li>core: add support for enumerating applications on Firefox OS</li>
  <li>core: add <em>NativePointer.toMatchPattern()</em> for use with <em>Memory.scan()</em></li>
  <li>core: fix QNX injector race condition</li>
  <li>objc: massively improved handling of types</li>
  <li>objc: fix implicit conversion from JS string to NSString</li>
  <li>objc: fix crash during registration of second proxy or unnamed class</li>
  <li>objc: new <em>ObjC.Object</em> properties: <em>$className</em> and <em>$super</em></li>
  <li>dalvik: add <em>Dalvik.choose()</em> for object carving</li>
</ul>

<p>4.1.9:</p>

<ul>
  <li>core: <em>NativeFunction</em> and <em>NativeCallback</em> now support functions passing
      struct types by value</li>
  <li>core: fix accidental case-sensitivity in <em>Process.getModuleByName()</em></li>
  <li>dalvik: new object property: <em>$className</em></li>
</ul>

<p>4.2.0:</p>

<ul>
  <li>core: add <em>this.returnAddress</em> to <em>Interceptor</em>’s <em>onEnter</em> and <em>onLeave</em>
      callbacks</li>
  <li>objc: add <em>ObjC.choose()</em> for object carving</li>
</ul>

<p>4.2.1:</p>

<ul>
  <li>core: fix exports enumeration of stripped libraries on QNX</li>
  <li>objc: new <em>ObjC.Object</em> property: <em>$kind</em>, a string that is either <em>instance</em>,
      <em>class</em> or <em>meta-class</em></li>
  <li>objc: fix the <em>$class</em> property so it also does the right thing for classes</li>
  <li>objc: fix crash when looking up inexistent method</li>
  <li>python: ensure graceful teardown of the reactor thread</li>
  <li>frida-discover: fix regression</li>
  <li>frida-repl: fix hang when target crashes during evaluation of expression</li>
</ul>

<p>4.2.2:</p>

<ul>
  <li>core: fix exception handling weirdness; very visible on ios-arm</li>
  <li>core: QNX stability improvements</li>
  <li>objc: add <em>ObjC.api</em> for direct access to the Objective-C runtime’s API</li>
  <li>objc: new <em>ObjC.Object</em> properties: <em>equals</em>, <em>$superClass</em> and <em>$methods</em></li>
  <li>objc: fix iOS 7 compatibility</li>
  <li>objc: fix <em>toJSON()</em> of <em>ObjC.classes</em> and <em>ObjC.protocols</em></li>
  <li>dalvik: fix handling of <em>java.lang.CharSequence</em></li>
  <li>frida-repl: add <em>%time</em> command for easy profiling</li>
</ul>

<p>4.2.3:</p>

<ul>
  <li>core: fix crash when handling exceptions without a message object</li>
  <li>core: fix the life-time of CpuContext JS wrappers</li>
  <li>core: expose the file mapping info to <em>Process.enumerateRanges()</em></li>
  <li>core: make it possible to coalesce neighboring ranges when enumerating</li>
  <li>core: add convenience API for looking up modules and ranges</li>
  <li>core: make the QNX mprotect read in a loop instead of just the once</li>
  <li>dalvik: avoid crashing the process if a type conversion fails</li>
  <li>dalvik: allow <em>null</em> as call parameter</li>
  <li>objc: fix conversion of structs with simple field types</li>
  <li>objc: speed up implicit string conversion by caching wrapper object</li>
</ul>

<p>4.2.4:</p>

<ul>
  <li>objc: fix crash when interacting with not-yet-realized classes</li>
</ul>

<p>4.2.5:</p>

<ul>
  <li>core: optimize Interceptor callback logic and make it twice as fast when
      <em>onEnter</em> and <em>onLeave</em> aren’t both specified</li>
  <li>core: fix return-address seen by the invocation-context on arm64</li>
  <li>core: add a fuzzy backtracer for arm64</li>
</ul>

<p>That’s all for now. Please help spread the word by sharing this post across
the inter-webs. We’re still quite small as an open source project, so
word-of-mouth marketing means a lot to us.</p>

<p>Enjoy!</p>

  </p>
</article>

      </div>

    </div>
  </section>


  <footer>
</footer>

  


  <!-- Google Analytics (http://google.com/analytics) -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-46880695-1']);
    _gaq.push(['_setDomainName', '']); // Multiple sub-domains
    _gaq.push(['_setAllowLinker', true]); // Multiple TLDs
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



</body>
</html>
